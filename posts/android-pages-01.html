<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="preload" as="font" href="/_next/static/media/2aaf0723e720e8b9-s.p.woff2" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/9de7766929c1e55d.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/6c438bdd1a6b11fe.css" data-precedence="next"/><title>Android Test 01 An Initial Understanding of Android</title><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="icon" href="/favicon.ico" type="image/x-icon" sizes="any"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" noModule=""></script></head><body class="antialiased min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-50 bg-grey __className_0ec1f4"><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><div class="my-max mx-auto py-10 px-4"><header><div class="my-flex"><div class="flex space-x-6 "><p class="blog-name font-medium text-2xl">Always Exploring</p></div><nav class="nav-ml text-sm font-medium space-x-6"><a href="/">Home</a><a href="/about">About</a></nav></div></header><main><div class="js-toc my-toc"></div><article class="py-6 prose post-prose dark:prose-invert"><div class="post-title">Android Test 01 An Initial Understanding of Android</div><time dateTime="2020-07-23T13:52:52.000Z" class="post-time">July 23, 2020</time><div class="js-toc-content"><h1 id="jvm与dalvik">JVM与Dalvik</h1>
<p>Android apps are primarily written in Java, but the compilation process is not the same as that of regular Java apps.</p>
<h2 id="java编译过程"><strong>Java编译过程</strong></h2>
<p>例如，一个测试程序Test.java：</p>
<pre><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">return</span> a + b;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] argc)</span> {
        <span class="hljs-type">Test</span> <span class="hljs-variable">test</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Test</span>();
        System.out.println(test.add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));
    }
}
</code></pre>
<p>使用<code>javac Test.java</code> 命令进行编译，得到字节码文件<code>Test.class</code>(使用<code>javap -c Test.class</code>可查看对应的字节码内容：</p>
<pre><code class="hljs language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">Test</span><span class="hljs-params">()</span>;
    Code:
       <span class="hljs-number">0</span>: aload_0
       <span class="hljs-number">1</span>: invokespecial #<span class="hljs-number">1</span>                  <span class="hljs-comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span>
       <span class="hljs-number">4</span>: <span class="hljs-keyword">return</span>

  <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span>, <span class="hljs-type">int</span>)</span>;
    Code:
       <span class="hljs-number">0</span>: iload_1
       <span class="hljs-number">1</span>: iload_2
       <span class="hljs-number">2</span>: iadd
       <span class="hljs-number">3</span>: ireturn

  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(java.lang.String[])</span>;
    Code:
       <span class="hljs-number">0</span>: <span class="hljs-keyword">new</span>           #<span class="hljs-number">2</span>                  <span class="hljs-comment">// class Test</span>
       <span class="hljs-number">3</span>: dup
       <span class="hljs-number">4</span>: invokespecial #<span class="hljs-number">3</span>                  <span class="hljs-comment">// Method &quot;&lt;init&gt;&quot;:()V</span>
       <span class="hljs-number">7</span>: astore_1
       <span class="hljs-number">8</span>: getstatic     #<span class="hljs-number">4</span>                  <span class="hljs-comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span>
      <span class="hljs-number">11</span>: aload_1
      <span class="hljs-number">12</span>: iconst_1
      <span class="hljs-number">13</span>: iconst_2
      <span class="hljs-number">14</span>: invokevirtual #<span class="hljs-number">5</span>                  <span class="hljs-comment">// Method add:(II)I</span>
      <span class="hljs-number">17</span>: invokevirtual #<span class="hljs-number">6</span>                  <span class="hljs-comment">// Method java/io/PrintStream.println:(I)V</span>
      <span class="hljs-number">20</span>: <span class="hljs-keyword">return</span>
}
</code></pre>
<p>得到字节码文件后即可以使用JVM（Java虚拟机）来运行：</p>
<p><img src="/images/image-20200723143249744.png" alt="image-20200723143249744"/></p>
<h2 id="dalvik编译过程"><strong>Dalvik编译过程</strong></h2>
<p>虽然Android APP是使用Java来编写的，但并不是使用标准的Java虚拟机来运行，而是通过自带的Dalvik虚拟机来运行。在JVM中，class文件是标准的字节码文件，而在Dalvik中，字节码文件为dex文件。class文件与dex文件对于其虚拟机来说可以理解为是一个可执行的文件。</p>
<p>通过使用Android系统的dx命令（位于<code>\\sdk\\build-tools</code>路径下）<code>dx --dex --output=classes.dex Test.class</code>将class文件和所有的jar包转换成符合Dalvik字节码格式的class.dex文件。在这里就不再展示class.dex文件的字节码内容。一个APP的核心代码都在这个文件中。</p>
<h2 id="art模式"><strong>ART模式</strong></h2>
<p>从Android 4.4版本开始，谷歌在原有以Dalvik虚拟机方式运行APP的基础上，新增了ART（Android Runtime）模式。Dalvik使用的是JIT（Just In Time 即时）编译器，也就是说APP每次运行时都需要即时编译将dex文件字节码转换成机器码，这会拖慢每次启动运行的效率。而ART模式使用的是AOT（Ahead of Time）预编译技术，也就是说APP在第一次安装的时候，就会进行预编译，将字节码编译成机器码。AOT编译使得APP每次启动时，省去了机器码转换的工作，提高了运行效率。</p>
<p>相比起来，ART会占用更多得存储空间，APP安装时间更长，但是对应用来说启动速度、运行效率更快，对系统来说，占用更少的性能以及更少的耗电。</p>
<h2 id="对比"><strong>对比</strong></h2>
<p><img src="/images/image-20200723143445240.png" alt="image-20200723143445240"/></p>
<h1 id="安全测试框架">安全测试框架</h1>
<h2 id="信息资产分类">信息资产分类</h2>
<p>针对不同类型的APP，侧重的关键的信息资产不同。比如：</p>
<ul>
<li>单机游戏类App：业务相对单一，核心资产是代码、资源以及游戏运行时的内存数据。一旦代码和资源被篡改、窃取，内存数据被修改，就会导致游戏的完整性遭到破坏。</li>
<li>社交类App：相对于代码、资源以及内存数据，用户社交关系和社交关系才是核心资产，具体包括聊天记录、接受文件、朋友关系、动态记录等信息。</li>
<li>金融类App：核心资产包括用户账单、交易记录等数据资产，也包括转账支付、产品交易、资金出入等业务功能。</li>
</ul>
<p>一般来说，与App相关的信息资产可以分为8类：</p>
<ol>
<li>App文件：如apk和dex等文件。</li>
<li>程序进程：App启动后进程一直存在，需防止对进程恶意关闭、劫持、注入等攻击。</li>
<li>内存数据：App运行后，程序代码和业务数据会加载到系统内存中。</li>
<li>前端界面：防止App界面被监听窃取数据或被劫持等。</li>
<li>本地存储：App产生的数据。</li>
<li>网络链路：App与云端服务器、第三方SDK等服务进行数据通信。防止不被监听、劫持和拦截等。</li>
<li>交互接口：App与本地安装的其他App进行通信以及互相调用，还有可能通过蓝牙、NFC与其他智能设备通信交互。</li>
<li>云端平台。</li>
</ol>
<h2 id="app安全测试框架">App安全测试框架</h2>
<p>根据不同信息资产的相似攻击方法进行整合分类，形成一个App安全测试框架：</p>
<p><img src="/images/image-20200723143725672.png" alt="image-20200723143725672"/></p>
<p>在接下来的文章中会对每一个测试项进行介绍。</p></div></article></main></div><script src="/_next/static/chunks/webpack-676b273ee73d1130.js" async=""></script><script src="/_next/static/chunks/2443530c-ac8981f6a5707b30.js" async=""></script><script src="/_next/static/chunks/139-1dec130228ce3944.js" async=""></script><script src="/_next/static/chunks/main-app-2fe6bc2bab605f4b.js" async=""></script></body></html><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/2aaf0723e720e8b9-s.p.woff2\",{\"as\":\"font\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/9de7766929c1e55d.css\",{\"as\":\"style\"}]\n3:HL[\"/_next/static/css/6c438bdd1a6b11fe.css\",{\"as\":\"style\"}]\n0:\"$L4\"\n"])</script><script>self.__next_f.push([1,"5:I{\"id\":\"7858\",\"chunks\":[\"272:static/chunks/webpack-676b273ee73d1130.js\",\"667:static/chunks/2443530c-ac8981f6a5707b30.js\",\"139:static/chunks/139-1dec130228ce3944.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":\"3055\",\"chunks\":[\"272:static/chunks/webpack-676b273ee73d1130.js\",\"667:static/chunks/2443530c-ac8981f6a5707b30.js\",\"139:static/chunks/139-1dec130228ce3944.js\"],\"name\":\"\",\"async\":false}\n8:I{\"id\":\"350\",\"chunks\":[\"414:static/chunks/414-bfaafd372e832af9.js\",\"185:static/chunks/app/layout-115007e8bdb5f9f2.js\"],\"name"])</script><script>self.__next_f.push([1,"\":\"ThemeProvider\",\"async\":false}\n9:I{\"id\":\"414\",\"chunks\":[\"414:static/chunks/414-bfaafd372e832af9.js\",\"185:static/chunks/app/layout-115007e8bdb5f9f2.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":\"1234\",\"chunks\":[\"414:static/chunks/414-bfaafd372e832af9.js\",\"185:static/chunks/app/layout-115007e8bdb5f9f2.js\"],\"name\":\"Analytics\",\"async\":false}\nb:I{\"id\":\"9544\",\"chunks\":[\"272:static/chunks/webpack-676b273ee73d1130.js\",\"667:static/chunks/2443530c-ac8981f6a5707b30.js\",\"139:static/chunks/139-1dec130228ce3944.js\"],\"name\":\"\""])</script><script>self.__next_f.push([1,",\"async\":false}\nc:I{\"id\":\"99\",\"chunks\":[\"272:static/chunks/webpack-676b273ee73d1130.js\",\"667:static/chunks/2443530c-ac8981f6a5707b30.js\",\"139:static/chunks/139-1dec130228ce3944.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"4:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/9de7766929c1e55d.css\",\"precedence\":\"next\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/6c438bdd1a6b11fe.css\",\"precedence\":\"next\"}]],[\"$\",\"$L5\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/android-pages-01\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"android-pages-01\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"android-pages-01\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$L6\",[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\"}]],\"globalErrorComponent\":\"$7\",\"notFound\":[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-50 bg-grey __className_0ec1f4\",\"children\":[\"$\",\"$L8\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"children\":[[\"$\",\"div\",null,{\"className\":\"my-max mx-auto py-10 px-4\",\"children\":[[\"$\",\"header\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"my-flex\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex space-x-6 \",\"children\":[\"$\",\"p\",null,{\"className\":\"blog-name font-medium text-2xl\",\"children\":\"Always Exploring\"}]}],[\"$\",\"nav\",null,{\"className\":\"nav-ml text-sm font-medium space-x-6\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"children\":\"Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/about\",\"children\":\"About\"}]]}]]}]}],[\"$\",\"main\",null,{\"children\":[\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}]]}],[\"$\",\"$La\",null,{}]]}]}]}],\"asNotFound\":false,\"children\":[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-50 bg-grey __className_0ec1f4\",\"children\":[\"$\",\"$L8\",null,{\"attribute\":\"class\",\"defaultTheme\":\"system\",\"enableSystem\":true,\"children\":[[\"$\",\"div\",null,{\"className\":\"my-max mx-auto py-10 px-4\",\"children\":[[\"$\",\"header\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"my-flex\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex space-x-6 \",\"children\":[\"$\",\"p\",null,{\"className\":\"blog-name font-medium text-2xl\",\"children\":\"Always Exploring\"}]}],[\"$\",\"nav\",null,{\"className\":\"nav-ml text-sm font-medium space-x-6\",\"children\":[[\"$\",\"$L9\",null,{\"href\":\"/\",\"children\":\"Home\"}],[\"$\",\"$L9\",null,{\"href\":\"/about\",\"children\":\"About\"}]]}]]}]}],[\"$\",\"main\",null,{\"children\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$\",\"$Lb\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",[\"slug\",\"android-pages-01\",\"c\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$Lc\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"asNotFound\":false,\"childProp\":{\"current\":[\"$Ld\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":[\\\"android-pages-01\\\"]}\"},\"styles\":[]}],\"segment\":[\"slug\",\"android-pages-01\",\"c\"]},\"styles\":[]}],\"segment\":\"posts\"},\"styles\":[]}]}]]}],[\"$\",\"$La\",null,{}]]}]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"e:I{\"id\":\"1753\",\"chunks\":[\"46:static/chunks/46-79f3cb62e0a9762a.js\",\"49:static/chunks/app/posts/[...slug]/page-e7b969ce3a6c175a.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"$Le\",null,{}],[\"$\",\"article\",null,{\"className\":\"py-6 prose post-prose dark:prose-invert\",\"children\":[[\"$\",\"div\",null,{\"className\":\"post-title\",\"children\":\"Android Test 01 An Initial Understanding of Android\"}],[\"$\",\"time\",null,{\"dateTime\":\"2020-07-23T13:52:52.000Z\",\"className\":\"post-time\",\"children\":\"July 23, 2020\"}],\"$undefined\",[\"$\",\"div\",null,{\"className\":\"js-toc-content\",\"children\":[[\"$\",\"h1\",null,{\"id\":\"jvm与dalvik\",\"children\":\"JVM与Dalvik\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Android apps are primarily written in Java, but the compilation process is not the same as that of regular Java apps.\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"java编译过程\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Java编译过程\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"例如，一个测试程序Test.java：\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-java\",\"children\":[[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"class\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Test\"}],\" {\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"int\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"add\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":[\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"int\"}],\" a, \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"int\"}],\" b)\"]}],\" {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\" a + b;\\n    }\\n\\n    \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"static\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"main\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"(String[] argc)\"}],\" {\\n        \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"Test\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-variable\",\"children\":\"test\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-operator\",\"children\":\"=\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Test\"}],\"();\\n        System.out.println(test.add(\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\", \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"2\"}],\"));\\n    }\\n}\\n\"]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"使用\",[\"$\",\"code\",null,{\"children\":\"javac Test.java\"}],\" 命令进行编译，得到字节码文件\",[\"$\",\"code\",null,{\"children\":\"Test.class\"}],\"(使用\",[\"$\",\"code\",null,{\"children\":\"javap -c Test.class\"}],\"可查看对应的字节码内容：\"]}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"className\":\"hljs language-java\",\"children\":[[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"class\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title class_\",\"children\":\"Test\"}],\" {\\n  \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"Test\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"()\"}],\";\\n    Code:\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"0\"}],\": aload_0\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\": invokespecial #\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\"                  \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"// Method java/lang/Object.\\\"\u003cinit\u003e\\\":()V\"}],\"\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"4\"}],\": \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\"\\n\\n  \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"int\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"add\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":[\"(\",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"int\"}],\", \",[\"$\",\"span\",null,{\"className\":\"hljs-type\",\"children\":\"int\"}],\")\"]}],\";\\n    Code:\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"0\"}],\": iload_1\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"1\"}],\": iload_2\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"2\"}],\": iadd\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"3\"}],\": ireturn\\n\\n  \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"public\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"static\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"void\"}],\" \",[\"$\",\"span\",null,{\"className\":\"hljs-title function_\",\"children\":\"main\"}],[\"$\",\"span\",null,{\"className\":\"hljs-params\",\"children\":\"(java.lang.String[])\"}],\";\\n    Code:\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"0\"}],\": \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"new\"}],\"           #\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"2\"}],\"                  \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"// class Test\"}],\"\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"3\"}],\": dup\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"4\"}],\": invokespecial #\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"3\"}],\"                  \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"// Method \\\"\u003cinit\u003e\\\":()V\"}],\"\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"7\"}],\": astore_1\\n       \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"8\"}],\": getstatic     #\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"4\"}],\"                  \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"// Field java/lang/System.out:Ljava/io/PrintStream;\"}],\"\\n      \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"11\"}],\": aload_1\\n      \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"12\"}],\": iconst_1\\n      \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"13\"}],\": iconst_2\\n      \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"14\"}],\": invokevirtual #\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"5\"}],\"                  \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"// Method add:(II)I\"}],\"\\n      \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"17\"}],\": invokevirtual #\",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"6\"}],\"                  \",[\"$\",\"span\",null,{\"className\":\"hljs-comment\",\"children\":\"// Method java/io/PrintStream.println:(I)V\"}],\"\\n      \",[\"$\",\"span\",null,{\"className\":\"hljs-number\",\"children\":\"20\"}],\": \",[\"$\",\"span\",null,{\"className\":\"hljs-keyword\",\"children\":\"return\"}],\"\\n}\\n\"]}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"得到字节码文件后即可以使用JVM（Java虚拟机）来运行：\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/images/image-20200723143249744.png\",\"alt\":\"image-20200723143249744\"}]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"dalvik编译过程\",\"children\":[\"$\",\"strong\",null,{\"children\":\"Dalvik编译过程\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"虽然Android APP是使用Java来编写的，但并不是使用标准的Java虚拟机来运行，而是通过自带的Dalvik虚拟机来运行。在JVM中，class文件是标准的字节码文件，而在Dalvik中，字节码文件为dex文件。class文件与dex文件对于其虚拟机来说可以理解为是一个可执行的文件。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"通过使用Android系统的dx命令（位于\",[\"$\",\"code\",null,{\"children\":\"\\\\\\\\sdk\\\\\\\\build-tools\"}],\"路径下）\",[\"$\",\"code\",null,{\"children\":\"dx --dex --output=classes.dex Test.class\"}],\"将class文件和所有的jar包转换成符合Dalvik字节码格式的class.dex文件。在这里就不再展示class.dex文件的字节码内容。一个APP的核心代码都在这个文件中。\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"art模式\",\"children\":[\"$\",\"strong\",null,{\"children\":\"ART模式\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"从Android 4.4版本开始，谷歌在原有以Dalvik虚拟机方式运行APP的基础上，新增了ART（Android Runtime）模式。Dalvik使用的是JIT（Just In Time 即时）编译器，也就是说APP每次运行时都需要即时编译将dex文件字节码转换成机器码，这会拖慢每次启动运行的效率。而ART模式使用的是AOT（Ahead of Time）预编译技术，也就是说APP在第一次安装的时候，就会进行预编译，将字节码编译成机器码。AOT编译使得APP每次启动时，省去了机器码转换的工作，提高了运行效率。\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"相比起来，ART会占用更多得存储空间，APP安装时间更长，但是对应用来说启动速度、运行效率更快，对系统来说，占用更少的性能以及更少的耗电。\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"对比\",\"children\":[\"$\",\"strong\",null,{\"children\":\"对比\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/images/image-20200723143445240.png\",\"alt\":\"image-20200723143445240\"}]}],\"\\n\",[\"$\",\"h1\",null,{\"id\":\"安全测试框架\",\"children\":\"安全测试框架\"}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"信息资产分类\",\"children\":\"信息资产分类\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"针对不同类型的APP，侧重的关键的信息资产不同。比如：\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"单机游戏类App：业务相对单一，核心资产是代码、资源以及游戏运行时的内存数据。一旦代码和资源被篡改、窃取，内存数据被修改，就会导致游戏的完整性遭到破坏。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"社交类App：相对于代码、资源以及内存数据，用户社交关系和社交关系才是核心资产，具体包括聊天记录、接受文件、朋友关系、动态记录等信息。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"金融类App：核心资产包括用户账单、交易记录等数据资产，也包括转账支付、产品交易、资金出入等业务功能。\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"一般来说，与App相关的信息资产可以分为8类：\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"App文件：如apk和dex等文件。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"程序进程：App启动后进程一直存在，需防止对进程恶意关闭、劫持、注入等攻击。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"内存数据：App运行后，程序代码和业务数据会加载到系统内存中。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"前端界面：防止App界面被监听窃取数据或被劫持等。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"本地存储：App产生的数据。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"网络链路：App与云端服务器、第三方SDK等服务进行数据通信。防止不被监听、劫持和拦截等。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"交互接口：App与本地安装的其他App进行通信以及互相调用，还有可能通过蓝牙、NFC与其他智能设备通信交互。\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"云端平台。\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",null,{\"id\":\"app安全测试框架\",\"children\":\"App安全测试框架\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"根据不同信息资产的相似攻击方法进行整合分类，形成一个App安全测试框架：\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/images/image-20200723143725672.png\",\"alt\":\"image-20200723143725672\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"在接下来的文章中会对每一个测试项进行介绍。\"}]]}]]}]]\n"])</script><script>self.__next_f.push([1,"6:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"Android Test 01 An Initial Understanding of Android\"}],null,null,null,null,null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"any\"}]],[],null]]\n"])</script>